/*
 * App URI: app/system/PUI_CM_108_00-01
 * Source Location: app/system/PUI_CM_108_00-01.clx
 *
 * This file was generated by eXbuilder6 compiler, Don't edit manually.
 */
(function(){
	var app = new cpr.core.App("app/system/PUI_CM_108_00-01", {
		onPrepare: function(loader){
			loader.addScript("thirdparty/echarts/echarts.min.js");
		},
		onCreate: function(/* cpr.core.AppInstance */ app, exports){
			var linker = {};
			// Start - User Script
			/************************************************
			 * PUI_CM_108_00-01.js
			 * Created at 2022. 3. 24. 오후 5:57:53.
			 *
			 * @author "nhyu"
			 ************************************************/
			
			/*
			 * 쉘에서 load 이벤트 발생 시 호출.
			 */
			function onUIControlShellLoad( /* cpr.events.CUIEvent */ e) {
				/** 
				 * @type cpr.controls.UIControlShell
				 */
				var uIControlShell = e.control;
				
				var shellDiv = e.content;
				//var shellDiv = uIControlShell.getComponent("content");
				if (!shellDiv) {
					return;
				}
				
				//초기화 및 설정(e-chart사용)
				myChart = echarts.init(shellDiv);
				myChart.resize();
				
				var option = {
			
					color: "#2f80ed",
			//		legend: {
			//			left: 'center',
			//			top: 'bottom',
			//			data: ['접속 수', '단위시스템']
			//		},
					grid: {
						top: '10%',
						left: '3%',
						right: '10%',
						bottom: '10%',
						containLabel: true
					},
					xAxis: {
						
						name : "접속 수",
						nameTextStyle: {
							fontSize: 16,
							verticalAlign: "top",
							lineHeight: 80,
							color: "#d1d1d1"
						},
						type: 'value',
						boundaryGap: [0, 0.01]
					},
					yAxis: {
						type: 'category',
						name: '단위시스템',
						nameGap: 5,
					    nameTextStyle: {
					      fontSize: 16,
					      align: "center",
					      color: "#d1d1d1"
					    },
						data: ['방조제유지관리시스템',
							'교량안전관리시스템',
							'도로안전관리시스템',
							'홍수예경보시스템',
							'기상정보수집시스템',
							'통합시설관리',
							'통합관제',
							'시스템관리'
						],
						axisTick: {
							show: false
						},
						axisLabel: {
							color: "#333",
							fontSize: 16
						},
						axisLine: {
							lineStyle: {
								color: "rgb(205, 210, 220)"
								//width: 1
							}
						}
					},
					series: [{
						name: '접속 수',
						type: 'bar',
						data: [50, 100, 150, 200, 100, 300, 200, 10]
					}]
				};
				
				myChart.setOption(option);
				
			}
			
			/*
			 * 쉘에서 init 이벤트 발생 시 호출.
			 */
			function onShl1Init(e){
				var shl1 = e.control;
				
				if(e.content){ //최초 init 이벤트에서 e.content는 null입니다. 2번째 이벤트부터 DOM을 갖고 있습니다.
					e.preventDefault(); //다음에 일어나는 쉘 load이벤트 발생을 방지합니다.
				}
			};
			// End - User Script
			
			// Header
			var dataSet_1 = new cpr.data.DataSet("ds1");
			dataSet_1.parseData({
				"columns": [
					{"name": "column1"},
					{"name": "column2"}
				],
				"rows": [
					{"column1": "방조제유지관리시스템", "column2": "50"},
					{"column1": "교량안전관리시스템", "column2": "100"},
					{"column1": "도로안전관리시스템", "column2": "150"},
					{"column1": "홍수예경보시스템", "column2": "200"},
					{"column1": "기상정보수집시스템", "column2": "100"},
					{"column1": "통합시설관리", "column2": "300"},
					{"column1": "통합관제", "column2": "200"},
					{"column1": "시스템관리", "column2": "10"}
				]
			});
			app.register(dataSet_1);
			
			app.supportMedia("all and (min-width: 1680px)", "default");
			app.supportMedia("all and (max-width: 1679px)", "tablet");
			
			// Configure root container
			var container = app.getContainer();
			container.style.css({
				"width" : "100%",
				"height" : "100%"
			});
			
			// Layout
			var formLayout_1 = new cpr.controls.layouts.FormLayout();
			formLayout_1.scrollable = false;
			formLayout_1.topMargin = "0px";
			formLayout_1.rightMargin = "0px";
			formLayout_1.bottomMargin = "0px";
			formLayout_1.leftMargin = "0px";
			formLayout_1.horizontalSpacing = "0px";
			formLayout_1.verticalSpacing = "0px";
			formLayout_1.setColumns(["1fr"]);
			formLayout_1.setRows(["30px", "1fr", "1fr"]);
			container.setLayout(formLayout_1);
			
			// UI Configuration
			var userDefinedControl_1 = new udc.com.appHeader("appheader");
			container.addChild(userDefinedControl_1, {
				"colIndex": 0,
				"rowIndex": 0
			});
			
			var group_1 = new cpr.controls.Container();
			group_1.style.setClasses(["card"]);
			// Layout
			var formLayout_2 = new cpr.controls.layouts.FormLayout();
			formLayout_2.scrollable = false;
			formLayout_2.topMargin = "0px";
			formLayout_2.rightMargin = "0px";
			formLayout_2.bottomMargin = "0px";
			formLayout_2.leftMargin = "0px";
			formLayout_2.horizontalSpacing = "0px";
			formLayout_2.verticalSpacing = "0px";
			formLayout_2.setColumns(["1fr"]);
			formLayout_2.setRows(["25px", "1fr"]);
			group_1.setLayout(formLayout_2);
			(function(container){
				var userDefinedControl_2 = linker.userDefinedControl_2 = new udc.com.comFormTitle("comformtitle1");
				userDefinedControl_2.ctrl = app.lookup("frfMain");
				userDefinedControl_2.title = "접속 통계";
				container.addChild(userDefinedControl_2, {
					"colIndex": 0,
					"rowIndex": 0
				});
				var uIControlShell_1 = new cpr.controls.UIControlShell("shl1");
				if(typeof onUIControlShellLoad == "function") {
					uIControlShell_1.addEventListener("load", onUIControlShellLoad);
				}
				if(typeof onShl1Init == "function") {
					uIControlShell_1.addEventListener("init", onShl1Init);
				}
				container.addChild(uIControlShell_1, {
					"colIndex": 0,
					"rowIndex": 1
				});
			})(group_1);
			container.addChild(group_1, {
				"colIndex": 0,
				"rowIndex": 1
			});
			
			var group_2 = new cpr.controls.Container();
			group_2.style.setClasses(["card"]);
			// Layout
			var formLayout_3 = new cpr.controls.layouts.FormLayout();
			formLayout_3.scrollable = false;
			formLayout_3.topMargin = "5px";
			formLayout_3.rightMargin = "5px";
			formLayout_3.bottomMargin = "5px";
			formLayout_3.leftMargin = "5px";
			formLayout_3.horizontalSpacing = "0px";
			formLayout_3.setColumns(["1fr"]);
			formLayout_3.setRows(["25px", "1fr"]);
			group_2.setLayout(formLayout_3);
			(function(container){
				var userDefinedControl_3 = linker.userDefinedControl_3 = new udc.com.comFormTitle();
				userDefinedControl_3.ctrl = app.lookup("frfMain");
				userDefinedControl_3.title = "시스템별 접속 수";
				container.addChild(userDefinedControl_3, {
					"colIndex": 0,
					"rowIndex": 0
				});
				var grid_1 = new cpr.controls.Grid("grd1");
				grid_1.init({
					"dataSet": app.lookup("ds1"),
					"columnMovable": true,
					"autoFit": "1, 2",
					"resizableColumns": "1, 2",
					"columns": [
						{"width": "50px"},
						{"width": "100px"},
						{"width": "150px"}
					],
					"header": {
						"rows": [{"height": "27px"}],
						"cells": [
							{
								"constraint": {"rowIndex": 0, "colIndex": 0},
								"configurator": function(cell){
									cell.filterable = false;
									cell.sortable = false;
									cell.text = "No.";
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 1},
								"configurator": function(cell){
									cell.targetColumnName = "column1";
									cell.filterable = false;
									cell.sortable = false;
									cell.text = "단위 시스템";
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 2},
								"configurator": function(cell){
									cell.targetColumnName = "column2";
									cell.filterable = false;
									cell.sortable = false;
									cell.text = "접속 수";
								}
							}
						]
					},
					"detail": {
						"rows": [{"height": "25px"}],
						"cells": [
							{
								"constraint": {"rowIndex": 0, "colIndex": 0},
								"configurator": function(cell){
									cell.columnType = "rowindex";
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 1},
								"configurator": function(cell){
									cell.columnName = "column1";
									cell.control = (function(){
										var output_1 = new cpr.controls.Output();
										output_1.bind("value").toDataColumn("column1");
										return output_1;
									})();
								}
							},
							{
								"constraint": {"rowIndex": 0, "colIndex": 2},
								"configurator": function(cell){
									cell.columnName = "column2";
									cell.control = (function(){
										var output_2 = new cpr.controls.Output();
										output_2.style.setClasses(["text-right"]);
										output_2.bind("value").toDataColumn("column2");
										return output_2;
									})();
								}
							}
						]
					}
				});
				container.addChild(grid_1, {
					"colIndex": 0,
					"rowIndex": 1
				});
			})(group_2);
			container.addChild(group_2, {
				"colIndex": 0,
				"rowIndex": 2,
				"height": 401
			});
		}
	});
	app.title = "접속통계";
	cpr.core.Platform.INSTANCE.register(app);
})();
